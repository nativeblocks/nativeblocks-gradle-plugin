# Nativeblocks Gradle Plugin

The Nativeblocks Gradle plugin uploads JSON schema generated by
the [compiler](https://github.com/nativeblocks/compiler-android) and prepares schemas for
Nativeblocks servers.

## Setup

### 1. Add the Plugin

Add the plugin to your module's `build.gradle.kts`:

```kotlin
plugins {
    id("io.nativeblocks.nativeblocks-gradle-plugin") version "[latest-version]"
}
```

### 2. Create Configuration File

Create a `nativeblocks.json` file in your **project root directory** with your Nativeblocks Studio
credentials:

```json
{
  "endpoint": "https://your-api-endpoint.com",
  "authToken": "your-auth-token",
  "organizationId": "your-organization-id"
}
```

Get these properties from Nativeblocks Studio under **Link Device**.

> **Note:** The plugin automatically detects your module's namespace and name from the Android
> configuration. No need to manually configure these anymore!

## Usage

The plugin creates tasks for each build variant (Debug, Release, etc.).

### Prepare Schema

Prepare the schema by copying generated integration files:

```shell
./gradlew :app:nativeblocksPrepareSchemaDebug
```

### Sync Integration

Upload integration schema to Nativeblocks servers:

```shell
./gradlew :app:nativeblocksSyncDebug
```

### Build Before Running

To build the project before running a task, use the `-Pnativeblocks.build=true` property:

```shell
./gradlew :app:nativeblocksPrepareSchemaDebug -Pnativeblocks.build=true
```